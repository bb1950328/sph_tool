(function(){var e={9106:function(e,t,n){"use strict";n.d(t,{P:function(){return fl}});n(7658);var i=n(9242),o=n(3396);function a(e,t,n,i,a,l){const s=(0,o.up)("NavBar"),r=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(s),(0,o.Wm)(r)],64)}var l=n(7139);const s=e=>((0,o.dD)("data-v-4e3152d3"),e=e(),(0,o.Cn)(),e),r={class:"navbar fixed-top"},u={class:"container-fluid"},d=s((()=>(0,o._)("a",{class:"navbar-brand",href:"#","aria-label":"Home"},null,-1))),c={class:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvas-navbar","aria-controls":"offcanvas-navbar","aria-label":"Open Navigation"},p={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvas-navbar","aria-labelledby":"offcanvas-navbar-label"},m=s((()=>(0,o._)("div",{class:"offcanvas-header"},[(0,o._)("h5",{class:"offcanvas-title",id:"offcanvas-navbar-label"},"Menu"),(0,o._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1))),h={class:"offcanvas-body"},f={class:"navbar-nav justify-content-end flex-grow-1 pe-3"};function b(e,t,n,i,a,s){const b=(0,o.up)("font-awesome-icon"),g=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("nav",r,[(0,o._)("div",u,[d,(0,o._)("button",c,[(0,o.Wm)(b,{icon:"fa-solid fa-bars"})]),(0,o._)("div",p,[m,(0,o._)("div",h,[(0,o._)("ul",f,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.subpageRoutes,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"nav-item",key:e.path},[(0,o.Wm)(g,{to:e.path,class:"nav-link"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.name),1)])),_:2},1032,["to"])])))),128))])])])])])}var g={name:"NavBar",data(){return{subpageRoutes:fl}}},w=n(89);const v=(0,w.Z)(g,[["render",b],["__scopeId","data-v-4e3152d3"]]);var y=v,_={name:"App",components:{NavBar:y},data(){return{}},mounted(){},methods:{}};const k=(0,w.Z)(_,[["render",a]]);var C=k,I=n(3494),P=n(7749),V=n(8539),S=n(2166),x=n(2483);const E=e=>((0,o.dD)("data-v-1f546bf4"),e=e(),(0,o.Cn)(),e),M={class:"p-2"},T={class:"table table-striped table-bordered table-sm mt-2"},D=E((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"Nr"),(0,o._)("th",{scope:"col"},"Bezeichnung"),(0,o._)("th",{scope:"col"},"Koordinaten"),(0,o._)("th",{scope:"col"})])],-1))),z={scope:"row"},G={class:"btn-group",role:"group","aria-label":"Aktionen"},L=["onClick"],A=["onClick"],Z={class:"modal",tabindex:"-1",role:"dialog",id:"pointEditModal"},N={class:"modal-dialog",role:"document"},O={class:"modal-content"},U={class:"modal-header"},W={class:"modal-title"},R=E((()=>(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[(0,o._)("span",{"aria-hidden":"true",hidden:""},"×")],-1))),B={class:"modal-body"},F=E((()=>(0,o._)("div",{class:"mb-3"},[(0,o._)("label",{for:"modalInputDescription",class:"form-label"},"Beschreibung"),(0,o._)("input",{type:"text",class:"form-control",id:"modalInputDescription"})],-1))),q=E((()=>(0,o._)("label",{for:"modalInputCoordinateGroup",class:"form-label"},"Koordinaten",-1))),$={class:"input-group",id:"modalInputCoordinateGroup"},j={class:"form-control",placeholder:"X",id:"modalInputX"},Y=E((()=>(0,o._)("div",{class:"input-group-prepend"},[(0,o._)("span",{class:"input-group-text"},"/")],-1))),H={class:"form-control",placeholder:"Y",id:"modalInputY"},K=E((()=>(0,o._)("div",{class:"input-group-prepend"},[(0,o._)("span",{class:"input-group-text"},"/")],-1))),Q={class:"form-control",placeholder:"H",id:"modalInputZ"},X={class:"",role:"group",id:"modalGPSandSwissTopoBtnGroup"},J={class:"modal-footer"};function ee(e,t,n,i,a,s){const r=(0,o.up)("font-awesome-icon"),u=(0,o.Q2)("mask");return(0,o.wg)(),(0,o.iD)("div",M,[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=e=>s.newPoint())},[(0,o.Wm)(r,{icon:"fa-solid fa-plus"}),(0,o.Uk)(" Neuer Punkt ")]),(0,o._)("table",T,[D,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.allPoints,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("th",z,(0,l.zw)(t),1),(0,o._)("td",null,(0,l.zw)(e.description),1),(0,o._)("td",null,(0,l.zw)(s.formatCoordinates(e.coordinates)),1),(0,o._)("td",null,[(0,o._)("div",G,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary btn-sm edit-point-button",onClick:e=>s.openModal(t),"aria-label":"Edit {{nr}}"},[(0,o.Wm)(r,{icon:"fa-solid fa-pen"})],8,L),(0,o._)("button",{type:"button",class:"btn btn-outline-danger btn-sm delete-point-button",onClick:e=>s.removePoint(t),"aria-label":"Delete {{nr}}"},[(0,o.Wm)(r,{icon:"fa-solid fa-trash-can"})],8,A)])])])))),128))])]),(0,o._)("div",Z,[(0,o._)("div",N,[(0,o._)("div",O,[(0,o._)("div",U,[(0,o._)("h5",W,"Punkt "+(0,l.zw)(a.currentlyEditingNr)+" bearbeiten",1),R]),(0,o._)("div",B,[(0,o._)("form",null,[F,q,(0,o._)("div",$,[(0,o.wy)((0,o._)("input",j,null,512),[[u,"### ###"]]),Y,(0,o.wy)((0,o._)("input",H,null,512),[[u,"### ###"]]),K,(0,o.wy)((0,o._)("input",Q,null,512),[[u,"####"]])]),(0,o._)("div",X,[(0,o._)("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:t[1]||(t[1]=e=>s.insertXYfromGPSinModal())},[(0,o.Uk)(" X/Y "),(0,o.Wm)(r,{icon:"fa-solid fa-location-crosshairs"}),(0,o.Uk)(" GPS ")]),(0,o._)("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:t[2]||(t[2]=e=>s.insertHfromGPSinModal())},[(0,o.Uk)(" H "),(0,o.Wm)(r,{icon:"fa-solid fa-location-crosshairs"}),(0,o.Uk)(" GPS ")]),(0,o._)("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:t[3]||(t[3]=e=>s.insertHfromSwissTopoInModal())},[(0,o.Uk)(" H "),(0,o.Wm)(r,{icon:"fa-solid fa-map-location-dot"}),(0,o.Uk)(" SwissTopo ")]),(0,o._)("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:t[4]||(t[4]=e=>s.pasteIntoModal())},[(0,o.Wm)(r,{icon:"fa-solid fa-paste"}),(0,o.Uk)(" Paste ")])])])]),(0,o._)("div",J,[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=e=>s.saveChangesFromModal())},"Speichern"),(0,o._)("button",{type:"button",class:"btn btn-secondary",onClick:t[6]||(t[6]=e=>s.closeModal())},"Abbrechen")])])])])])}const te=485e3,ne=835e3,ie=74e3,oe=296e3,ae=(oe+te)/2;function le(e){const t=se(e.x),n=se(e.y),i=re(e.z);return`${t} / ${n} / ${i}`}function se(e){const t=Math.round(e)%1e6,n=t.toString().padStart(6,"0");return n.slice(0,3)+" "+n.slice(3)}function re(e){return Math.round(e).toString()}function ue(e){const t=e.latitude>0?"N":"S",n=e.longitude>0?"E":"W",i=Math.abs(e.latitude).toFixed(7),o=Math.abs(e.longitude).toFixed(7),a=e.height.toFixed(1);return`${i}° ${t}, ${o}° ${n}, ${a}m`}function de(e){e=Math.round(e);const t=(e%6400+6400)%6400;return e<0?(e=t-6400,`${t}‰ (≙${e}‰)`):`${t}‰`}function ce(e){const t=(e.x-6e5)/1e6,n=(e.y-2e5)/1e6,i=2.6779094+4.728982*t+.791484*t*n+.1306*t*Math.pow(n,2)-.0436*Math.pow(t,3),o=16.9023892+3.238272*n-.270978*Math.pow(t,2)-.002528*Math.pow(n,2)-.0447*Math.pow(t,2)*n-.014*Math.pow(n,3),a=e.z+49.55-12.6*t-22.64*n;return{latitude:100*o/36,longitude:100*i/36,height:a}}function pe(e){const t=3600*e.latitude,n=3600*e.longitude,i=(t-169028.66)/1e4,o=(n-26782.5)/1e4,a=2600072.37+211455.93*o-10938.51*o*i-.36*o*Math.pow(o,2)-44.54*Math.pow(o,3),l=1200147.07+308807.95*i+3745.25*Math.pow(o,2)+76.63*Math.pow(i,2)-194.56*Math.pow(o,2)*i+119.79*Math.pow(i,3),s=a-2e6,r=l-1e6,u=e.height-49.55+2.73*o+6.94*i;return{x:s,y:r,z:u}}function me(e,t){navigator.geolocation.getCurrentPosition((t=>{const n=null!==t.coords.altitude,i=n?t.coords.altitude:0,o={latitude:t.coords.latitude,longitude:t.coords.longitude,height:i};e(pe(o))}),t,{enableHighAccuracy:!0,maximumAge:1e5})}function he(e,t,n,i){const o=new URLSearchParams({easting:e.toString(),northing:t.toString(),sr:"21781"}),a="https://api3.geo.admin.ch/rest/services/height?"+o;fetch(a).then((e=>e.json())).then((e=>e["height"])).then(parseFloat).then(n).catch(i)}function fe(e){const t=new RegExp(/[12]?[' ]?(\d{3})[' ]?(\d{3})(\.\d+)?/,"g");let n=e;const i={x:0,y:0,z:0};for(const l of e.matchAll(t)){console.log(l[0]);let e=1e3*parseInt(l[1])+parseInt(l[2]);null!=l[3]&&parseInt(l[3][1])>=5&&e++,ie<=e&&e<=ae?i.y=e:ae<=e&&e<=ne&&(i.x=e),n=n.replace(l[0],"")}const o=new RegExp(/(\d)[' ]?(\d{2,4})(\.\d+)?/),a=o.exec(n);if(null!=a){let e="";for(let t=1;null!=a[t];t++)e+=a[t];i.z=Math.round(parseFloat(e))}return i}function be(e,t=8){return`https://map.geo.admin.ch/?E=2${e.x}&N=1${e.y}&zoom=${t}&crosshair=marker`}function ge(e,t=8){return`https://www.google.com/maps/place/${e.latitude},${e.longitude}/@${e.latitude},${e.longitude},${t}z`}function we(e,t,n){const i=ve(e,t,n);return null==i?null:e[i]}function ve(e,t,n){let i=0,o=e.length-1;while(i<=o){const a=Math.floor((i+o)/2);if(e[a][t]===n)return a;e[a][t]<n?i=a+1:o=a-1}return null}function ye(e){return void 0===e||null===e?e:JSON.parse(JSON.stringify(e))}function _e(e){return/^\d+$/.test(e)}var ke=n(9414),Ce=n(4870);const Ie=(0,Ce.qj)(Ve());function Pe(){localStorage.setItem("points",JSON.stringify(Ie))}function Ve(){const e=localStorage.getItem("points");return null===e?{1:{description:"Kaserne Chur",coordinates:{x:758603.97,y:190604.61,z:582.2}},2:{description:"Halle 6",coordinates:{x:757100.66,y:190421.8,z:565.1}},3:{description:"Spl 342",coordinates:{x:756828.17,y:191188.9,z:567.8}}}:JSON.parse(e)}(0,o.YP)(Ie,(()=>Pe()));const Se="Neuer Punkt";var xe={name:"PointList",mounted(){const e=(0,x.yj)();if(Object.hasOwn(e.query,"intent")){const t=JSON.parse(String(e.query.intent));if("create"===t.action){let e=this.findNextFreeNumber();this.allPoints[e]={description:Se,coordinates:t.coordinates},this.openModal(e)}else"edit"===t.action?this.openModal(t.nr):console.warn(`did not understand intent action: ${t.action}`);this.$router.replace({query:void 0})}},methods:{formatCoordinates:le,newPoint(){let e=this.findNextFreeNumber();this.allPoints[e]={description:Se,coordinates:{x:0,y:0,z:0}},this.openModal(e)},findNextFreeNumber(){let e=1;while(Object.hasOwn(this.allPoints,e.toString()))++e;return e},removePoint(e){delete this.allPoints[e]},setModalCoordinates:function(e){let t=e["x"],n=e["y"],i=e["z"];t&&(document.getElementById("modalInputX").value=se(t)),n&&(document.getElementById("modalInputY").value=se(n)),i&&(document.getElementById("modalInputZ").value=re(i))},openModal(e){this.currentlyEditingNr=e;let t=this.allPoints[this.currentlyEditingNr];document.getElementById("modalInputDescription").value=t["description"],this.setModalCoordinates(t["coordinates"]),this.modal=new S.u_(document.getElementById("pointEditModal")),this.modal.show()},closeModal(){this.modal.hide(),this.currentlyEditingNr=null},getCoordinatesFromModalInputs:function(){return{x:parseInt(document.getElementById("modalInputX").value.replace(" ","")),y:parseInt(document.getElementById("modalInputY").value.replace(" ","")),z:parseInt(document.getElementById("modalInputZ").value)}},saveChangesFromModal(){let e=this.allPoints[this.currentlyEditingNr];e["description"]=document.getElementById("modalInputDescription").value,e["coordinates"]=this.getCoordinatesFromModalInputs(),this.closeModal()},insertXYfromGPSinModal(){me((e=>{delete e["z"],this.setModalCoordinates(e)}),(e=>console.error(e)))},insertHfromGPSinModal(){me((e=>{delete e["x"],delete e["y"],this.setModalCoordinates(e)}),(e=>console.error(e)))},insertHfromSwissTopoInModal(){let e=this.getCoordinatesFromModalInputs();he(e["x"],e["y"],(e=>this.setModalCoordinates({z:e})),(e=>console.error(e)))},pasteIntoModal(){navigator.clipboard.readText().then(fe).then(this.setModalCoordinates)}},data(){return{currentlyEditingNr:null,allPoints:Ie}},directives:{mask:ke.mask}};const Ee=(0,w.Z)(xe,[["render",ee],["__scopeId","data-v-1f546bf4"]]);var Me=Ee;const Te=e=>((0,o.dD)("data-v-fdb41c62"),e=e(),(0,o.Cn)(),e),De={class:"p-2 d-flex flex-column"},ze={class:"col-11"},Ge={class:"mb-3"},Le=Te((()=>(0,o._)("label",{for:"weapon",class:"form-label"},"Waffe",-1))),Ae=["value"],Ze={class:"mb-3 row"},Ne={class:"col"},Oe=Te((()=>(0,o._)("label",{for:"distance-range-input",class:"form-label"},"Distanz (m)",-1))),Ue=["min","max"],We={class:"col-sm-2 col-md-2 col-lg-1 double-input-value-container"},Re=Te((()=>(0,o._)("label",{for:"distance-value-input",class:"form-label",hidden:""},"Distanz (m)",-1))),Be={class:"mb-3 row"},Fe={class:"col"},qe=Te((()=>(0,o._)("label",{for:"wind-speed-range-input",class:"form-label"},"Windgeschwindigkeit (m/s)",-1))),$e={class:"col-sm-2 col-md-2 col-lg-1 double-input-value-container"},je=Te((()=>(0,o._)("label",{for:"wind-speed-value-input",class:"form-label",hidden:""},"Windgeschwindigkeit (m/s)",-1))),Ye={class:"mb-3 row"},He={class:"col-lg-3 col-md-4 col-sm-5"},Ke=Te((()=>(0,o._)("label",{for:"windDirectionInput",class:"form-label"},"Windrichtung (Uhr)",-1))),Qe={class:"col"},Xe={class:"mb-3"},Je=Te((()=>(0,o._)("label",{for:"airPressureInput",class:"form-label"},"Luftdruck (mbar)",-1))),et={class:"mb-3"},tt=Te((()=>(0,o._)("label",{for:"temperatureInput",class:"form-label"},"Temperatur (°C)",-1))),nt={class:"mb-3"},it=Te((()=>(0,o._)("label",{for:"barrelGroup",class:"form-label"},"Lauf",-1))),ot={class:"btn-group",role:"group","aria-label":"Lauf",id:"barrel-group"},at=Te((()=>(0,o._)("label",{class:"btn btn-outline-primary",for:"barrel-radio-new"},"Neu",-1))),lt=Te((()=>(0,o._)("label",{class:"btn btn-outline-primary",for:"barrel-radio-old"},"Alt",-1))),st=Te((()=>(0,o._)("h2",null,"Resultat",-1))),rt={class:"mb-3",id:"clicks-result"},ut={class:""},dt=Te((()=>(0,o._)("td",null,"Distanz",-1))),ct=Te((()=>(0,o._)("td",null,"Alter Lauf",-1))),pt=Te((()=>(0,o._)("td",null,"Luftdruck",-1))),mt=Te((()=>(0,o._)("td",null,"Temperatur",-1))),ht={class:"important-row"},ft=Te((()=>(0,o._)("td",null,"Höhe",-1))),bt={class:""},gt=Te((()=>(0,o._)("td",null,"Wind",-1))),wt=Te((()=>(0,o._)("td",null,"Derivation",-1))),vt={class:"important-row"},yt=Te((()=>(0,o._)("td",null,"Seite",-1))),_t={class:"mb-4"};function kt(e,t,n,a,s,r){const u=(0,o.up)("ClockRadioGroup"),d=(0,o.up)("font-awesome-icon"),c=(0,o.up)("ClickTable");return(0,o.wg)(),(0,o.iD)("div",De,[(0,o._)("form",ze,[(0,o._)("div",Ge,[Le,(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>s.situation.weapon=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.BALLISTICS_DATA_WEAPONS,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{value:t,key:t},(0,l.zw)(e),9,Ae)))),128))],512),[[i.bM,s.situation.weapon]])]),(0,o._)("div",Ze,[(0,o._)("div",Ne,[Oe,(0,o.wy)((0,o._)("input",{id:"distance-range-input",type:"range",class:"form-range","onUpdate:modelValue":t[1]||(t[1]=e=>s.situation.distance=e),min:s.situation.ballisticsData.minDistance,max:s.situation.ballisticsData.maxDistance},null,8,Ue),[[i.nr,s.situation.distance]])]),(0,o._)("div",We,[Re,(0,o.wy)((0,o._)("input",{id:"distance-value-input",type:"number",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>s.situation.distance=e),"aria-label":"Distance"},null,512),[[i.nr,s.situation.distance]])])]),(0,o._)("div",Be,[(0,o._)("div",Fe,[qe,(0,o.wy)((0,o._)("input",{id:"wind-speed-range-input",type:"range",class:"form-range","onUpdate:modelValue":t[3]||(t[3]=e=>s.situation.windSpeed=e),min:"0",max:"10"},null,512),[[i.nr,s.situation.windSpeed]])]),(0,o._)("div",$e,[je,(0,o.wy)((0,o._)("input",{id:"wind-speed-value-input",class:"form-control",type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>s.situation.windSpeed=e),min:"0",max:"10","aria-label":"Wind speed"},null,512),[[i.nr,s.situation.windSpeed]])])]),(0,o._)("div",Ye,[(0,o._)("div",He,[Ke,(0,o.Wm)(u,{modelValue:s.situation.windClock,"onUpdate:modelValue":t[5]||(t[5]=e=>s.situation.windClock=e)},null,8,["modelValue"])]),(0,o._)("div",Qe,[(0,o._)("div",Xe,[Je,(0,o.wy)((0,o._)("input",{id:"airPressureInput",type:"number",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>s.situation.airPressure=e)},null,512),[[i.nr,s.situation.airPressure]])]),(0,o._)("div",et,[tt,(0,o.wy)((0,o._)("input",{id:"temperatureInput",type:"number",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>s.situation.temperature=e)},null,512),[[i.nr,s.situation.temperature]])]),(0,o._)("div",nt,[it,(0,o._)("div",ot,[(0,o.wy)((0,o._)("input",{type:"radio",class:"btn-check",name:"barrel-radio",id:"barrel-radio-new",autocomplete:"off","onUpdate:modelValue":t[8]||(t[8]=e=>s.situation.oldBarrel=e),value:!1},null,512),[[i.G2,s.situation.oldBarrel]]),at,(0,o.wy)((0,o._)("input",{type:"radio",class:"btn-check",name:"barrel-radio",id:"barrel-radio-old",autocomplete:"off","onUpdate:modelValue":t[9]||(t[9]=e=>s.situation.oldBarrel=e),value:!0},null,512),[[i.G2,s.situation.oldBarrel]]),lt])])])])]),st,(0,o._)("div",rt,[(0,o._)("div",ut,[(0,o._)("table",null,[(0,o._)("tr",null,[dt,(0,o._)("td",null,(0,l.zw)(r.formatElevationClicks(s.situation.baseElevation)),1)]),(0,o.wy)((0,o._)("tr",null,[ct,(0,o._)("td",null,(0,l.zw)(r.formatElevationClicks(s.situation.oldBarrelElevationCorrection)),1)],512),[[i.F8,0!==s.situation.oldBarrelElevationCorrection]]),(0,o.wy)((0,o._)("tr",null,[pt,(0,o._)("td",null,(0,l.zw)(r.formatElevationClicks(s.situation.airPressureElevationCorrection)),1)],512),[[i.F8,0!==s.situation.airPressureElevationCorrection]]),(0,o.wy)((0,o._)("tr",null,[mt,(0,o._)("td",null,(0,l.zw)(r.formatElevationClicks(s.situation.temperatureElevationCorrection)),1)],512),[[i.F8,0!==s.situation.temperatureElevationCorrection]]),(0,o._)("tr",ht,[ft,(0,o._)("td",null,(0,l.zw)(r.formatElevationClicks(s.situation.totalElevation)),1)])])]),(0,o._)("div",bt,[(0,o._)("table",null,[(0,o.wy)((0,o._)("tr",null,[gt,(0,o._)("td",{class:(0,l.C_)(r.windageCssClass(s.situation.baseWindage))},(0,l.zw)(r.formatWindageClicks(s.situation.baseWindage)),3)],512),[[i.F8,s.situation.baseWindage]]),(0,o.wy)((0,o._)("tr",null,[wt,(0,o._)("td",{class:(0,l.C_)(r.windageCssClass(s.situation.derivationWindageCorrection))},(0,l.zw)(r.formatWindageClicks(s.situation.derivationWindageCorrection)),3)],512),[[i.F8,s.situation.derivationWindageCorrection]]),(0,o._)("tr",vt,[yt,(0,o._)("td",{class:(0,l.C_)(r.windageCssClass(s.situation.totalWindage))},(0,l.zw)(r.formatWindageClicks(s.situation.totalWindage)),3)])])])]),(0,o._)("div",_t,[(0,o._)("div",null," Flugzeit: "+(0,l.zw)(s.situation.flightTime.toFixed(1))+" s ",1),(0,o._)("div",null," Geschossenergie: "+(0,l.zw)(Math.round(s.situation.bulletEnergy))+" J ",1)]),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary w-auto",onClick:t[10]||(t[10]=t=>e.$refs.clickTable.openModal(this.situation))},[(0,o.Wm)(d,{icon:"fa-solid fa-table-cells"}),(0,o.Uk)(" Klicktabelle berechnen ")]),(0,o.Wm)(c,{ref:"clickTable"},null,512)])}var Ct=n(7327);class It{findClosestValueIndex(e,t){let n=0;while(e[n]<t&&n<e.length-1)++n;const i=e[n-1],o=e[n];return Math.abs(t-i)<Math.abs(t-o)?n-1:n}findIndicesAndFactorForInterpolation(e,t){const n=e[0]<e[1],i=e.length-1;let o,a;if(n){if(t<=e[0])return[0,0,1];if(t>=e[i])return[i,i,1];o=0;while(e[o]<t&&o<i)++o;a=o-1}else{if(t<=e[i])return[i,i,1];if(t>=e[0])return[0,0,1];o=i;while(e[o]<t&&o>0)--o;a=o+1}const l=e[a],s=e[o];return[a,o,(s-t)/(s-l)]}checkNotRagged2D(e){if(e.length>0){const t=e[0].length;for(let n=1;n<e.length;n++)if(e[n].length!=t)throw new Error(`2D array is ragged (starting on row ${n})`)}}}class Pt extends It{constructor(e){super(),(0,Ct.Z)(this,"values",void 0),(0,Ct.Z)(this,"keys",void 0),(0,Ct.Z)(this,"lastIdx",void 0),this.checkNotRagged2D(e),this.keys=e.map((e=>e[0])),this.values=e.map((e=>e[1])),this.lastIdx=e.length-1}getValueLinearInterpolation(e){const[t,n,i]=this.findIndicesAndFactorForInterpolation(this.keys,e);return this.values[t]*i+this.values[n]*(1-i)}getClosestValue(e){const t=this.findClosestValueIndex(this.keys,e);return this.values[t]}}class Vt extends It{constructor(e,t,n){super(),(0,Ct.Z)(this,"keys0",void 0),(0,Ct.Z)(this,"keys1",void 0),(0,Ct.Z)(this,"values",void 0),this.checkNotRagged2D(n),this.keys0=e,this.keys1=t,this.values=n}getValueBilinearInterpolation(e,t){const[n,i,o]=this.findIndicesAndFactorForInterpolation(this.keys0,e),[a,l,s]=this.findIndicesAndFactorForInterpolation(this.keys1,t),r=this.values[n][a],u=this.values[n][l],d=this.values[i][a],c=this.values[i][l],p=r*o+d*(1-o),m=u*o+c*(1-o);return p*s+m*(1-s)}getClosestValue(e,t){const n=this.findClosestValueIndex(this.keys0,e),i=this.findClosestValueIndex(this.keys1,t);return this.values[n][i]}}class St extends It{constructor(e,t,n,i){super(),(0,Ct.Z)(this,"keys0",void 0),(0,Ct.Z)(this,"keys1",void 0),(0,Ct.Z)(this,"keys2",void 0),(0,Ct.Z)(this,"values",void 0),this.keys0=e,this.keys1=t,this.keys2=n,this.values=i}getValueTrilinearInterpolation(e,t,n){const[i,o,a]=this.findIndicesAndFactorForInterpolation(this.keys0,e),[l,s,r]=this.findIndicesAndFactorForInterpolation(this.keys1,t),[u,d,c]=this.findIndicesAndFactorForInterpolation(this.keys2,n),p=this.values[i][l][u],m=this.values[i][s][u],h=this.values[o][l][u],f=this.values[o][s][u],b=this.values[i][l][d],g=this.values[i][s][d],w=this.values[o][l][d],v=this.values[o][s][d],y=p*a+h*(1-a),_=m*a+f*(1-a),k=b*a+w*(1-a),C=g*a+v*(1-a),I=y*r+_*(1-r),P=k*r+C*(1-r);return I*c+P*(1-c)}getClosestValue(e,t,n){const i=this.findClosestValueIndex(this.keys0,e),o=this.findClosestValueIndex(this.keys1,t),a=this.findClosestValueIndex(this.keys2,n);return this.values[i][o][a]}}const xt={minDistance:25,maxDistance:1275,distanceElevation:new Pt([[25,10],[50,2],[75,0],[100,0],[125,0],[150,2],[175,3],[200,4],[225,6],[250,8],[275,10],[300,11],[325,13],[350,15],[375,17],[400,20],[425,22],[450,25],[475,27],[500,29],[525,32],[550,34],[575,37],[600,39],[625,42],[650,45],[675,48],[700,51],[725,54],[750,57],[775,60],[800,63],[825,67],[850,70],[875,74],[900,77],[925,81],[950,85],[975,88],[1e3,92],[1025,96],[1050,101],[1075,105],[1100,109],[1125,114],[1150,119],[1175,124],[1200,128],[1225,133],[1250,139],[1275,144]]),oldBarrelDistanceElevation:new Pt([[200,0],[300,2],[400,1],[500,2],[600,2],[700,2],[800,4],[900,4],[1e3,5],[1100,6],[1200,6]]),distanceAirPressureElevation:new Vt([300,400,500,600,700,800,900,1e3,1100,1200],[950,900,850,800,750],[[0,0,0,0,0],[0,0,0,0,0],[-1,-2,-3,-4,-5],[-1,-2,-3,-5,-6],[-2,-3,-5,-6,-7],[-2,-4,-6,-8,-9],[-3,-6,-9,-11,-14],[-4,-8,-11,-15,-18],[-5,-9,-13,-17,-20],[-6,-10,-14,-19,-23]]),distanceTemperatureElevation:new Vt([300,400,500,600,700,800,900,1e3,1100,1200],[45,35,25,15,5,-5,-15,-25],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[-2,-1,-1,0,1,1,2,2],[-2,-1,-1,0,1,1,2,3],[-3,-2,-2,0,2,2,3,3],[-3,-3,-2,0,2,2,3,4],[-4,-3,-2,0,2,3,4,5],[-5,-4,-3,0,3,4,5,7],[-7,-5,-4,0,3,6,8,11],[-9,-6,-5,0,4,8,10,15]]),distanceDerivationWindage:new Pt([[300,0],[400,0],[500,-1],[600,-1],[700,-2],[800,-2],[900,-3],[1e3,-3],[1100,-4],[1200,-4]]),distanceWindClockSpeedWindage:new St([300,400,500,600,700,800,900,1e3,1100,1200],[0,1,2,3],[0,2,4,6,8,10],[[[0,0,0,0,0,0],[0,1,2,3,4,5],[0,2,4,6,7,9],[0,2,4,6,9,11]],[[0,0,0,0,0,0],[0,1,3,4,6,7],[0,3,5,8,10,13],[0,3,6,9,12,15]],[[0,0,0,0,0,0],[0,2,4,6,8,10],[0,3,7,10,13,17],[0,4,8,12,15,19]],[[0,0,0,0,0,0],[0,2,5,7,9,12],[0,4,8,12,16,20],[0,5,9,14,19,23]],[[0,0,0,0,0,0],[0,3,6,8,11,14],[0,5,10,15,19,24],[0,6,11,17,23,28]],[[0,0,0,0,0,0],[0,3,7,10,14,17],[0,6,12,17,23,29],[0,7,14,20,27,34]],[[0,0,0,0,0,0],[0,4,8,12,16,20],[0,7,14,20,27,34],[0,8,16,24,32,39]],[[0,0,0,0,0,0],[0,5,9,14,18,23],[0,8,16,23,31,39],[0,9,18,27,36,45]],[[0,0,0,0,0,0],[0,5,10,15,21,26],[0,9,18,26,35,44],[0,10,21,31,41,51]],[[0,0,0,0,0,0],[0,6,12,17,23,29],[0,10,20,30,40,50],[0,12,23,35,46,58]]]),distanceFlightTime:new Pt([[300,.35],[400,.5],[500,.65],[600,.85],[700,1],[800,1.2],[900,1.4],[1e3,1.6],[1100,1.85],[1200,2.1]]),distanceBulletEnergy:new Pt([[0,6041],[100,5383],[200,4784],[300,4238],[400,3743],[500,3294],[600,2887],[700,2521],[800,2199],[900,1913],[1e3,1661],[1100,1446],[1200,1265]])},Et={minDistance:25,maxDistance:775,distanceElevation:new Pt([[25,8],[50,1],[75,0],[100,0],[125,0],[150,0],[175,0],[200,1],[225,1],[250,2],[275,3],[300,4],[325,4],[350,5],[375,6],[400,8],[425,9],[450,10],[475,11],[500,13],[525,14],[550,15],[575,17],[600,19],[625,20],[650,22],[675,24],[700,26],[725,28],[750,30],[775,33]]),oldBarrelDistanceElevation:new Pt([[0,0],[600,0]]),distanceAirPressureElevation:new Vt([200,300,400,500,600,700],[950,900,850,800,750],[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[-1,-2,-3,-3,-4],[-2,-3,-4,-5,-6]]),distanceTemperatureElevation:new Vt([200,300,400,500,600,700],[45,35,25,15,5,-5,-15,-25],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[-3,-2,0,0,0,0,2,3],[-3,-2,-1,0,0,1,4,6]]),distanceDerivationWindage:new Pt([[200,0],[300,0],[400,0],[500,0],[600,0],[700,-1]]),distanceWindClockSpeedWindage:new St([200,300,400,500,600,700],[0,1,2,3],[0,2,4,6,8],[[[0,0,0,0,0],[0,0,1,1,2],[0,0,1,2,3],[0,1,2,3,4]],[[0,0,0,0,0],[0,0,1,2,3],[0,1,2,4,5],[0,1,3,5,6]],[[0,0,0,0,0],[0,1,2,3,7],[0,2,4,6,8],[0,2,4,7,9]],[[0,0,0,0,0],[0,1,3,4,6],[0,2,5,8,11],[0,3,6,9,12]],[[0,0,0,0,0],[0,2,4,6,8],[0,3,7,10,14],[0,4,8,12,16]],[[0,0,0,0,0],[0,2,5,7,10],[0,4,9,13,18],[0,5,10,15,21]]]),distanceFlightTime:new Pt([[0,0],[50,.06],[100,.12],[150,.18],[200,.25],[250,.32],[300,.39],[350,.47],[400,.55],[500,.74],[600,.94]]),distanceBulletEnergy:new Pt([[0,1679],[50,1516],[100,1365],[150,1228],[200,1101],[250,987],[300,880],[350,783],[400,692],[500,537],[600,408]])},Mt={stgw:"Stgw90 mit ZF (GP90)",sako:"Sako TRG-42 (GP04)"},Tt={stgw:Et,sako:xt};class Dt{constructor(){(0,Ct.Z)(this,"weapon",void 0),(0,Ct.Z)(this,"distance",void 0),(0,Ct.Z)(this,"windSpeed",void 0),(0,Ct.Z)(this,"windClock",void 0),(0,Ct.Z)(this,"airPressure",void 0),(0,Ct.Z)(this,"temperature",void 0),(0,Ct.Z)(this,"oldBarrel",void 0),this.weapon="sako",this.distance=100,this.windSpeed=0,this.windClock=0,this.airPressure=950,this.temperature=25,this.oldBarrel=!1}loadFromLocalStorage(e="ballistics"){this.weapon=localStorage.getItem(`${e}_weapon`)||"sako",this.distance=parseInt(localStorage.getItem(`${e}_distance`)||"")||100,this.windSpeed=parseInt(localStorage.getItem(`${e}_windSpeed`)||"")||0,this.windClock=parseInt(localStorage.getItem(`${e}_windClock`)||"")||0,this.airPressure=parseInt(localStorage.getItem(`${e}_airPressure`)||"")||950,this.temperature=parseInt(localStorage.getItem(`${e}_temperature`)||"")||25,this.oldBarrel="true"===localStorage.getItem(`${e}_oldBarrel`)}saveToLocalStorage(e="ballistics"){localStorage.setItem(`${e}_weapon`,this.weapon.toString()),localStorage.setItem(`${e}_distance`,this.distance.toString()),localStorage.setItem(`${e}_windSpeed`,this.windSpeed.toString()),localStorage.setItem(`${e}_windClock`,this.windClock.toString()),localStorage.setItem(`${e}_airPressure`,this.airPressure.toString()),localStorage.setItem(`${e}_temperature`,this.temperature.toString()),localStorage.setItem(`${e}_oldBarrel`,this.oldBarrel.toString())}get ballisticsData(){return Tt[this.weapon]}get baseElevation(){return this.ballisticsData.distanceElevation.getValueLinearInterpolation(this.distance)}get oldBarrelElevationCorrection(){return this.oldBarrel?this.ballisticsData.oldBarrelDistanceElevation.getValueLinearInterpolation(this.distance):0}get airPressureElevationCorrection(){return this.ballisticsData.distanceAirPressureElevation.getValueBilinearInterpolation(this.distance,this.airPressure)}get temperatureElevationCorrection(){return this.ballisticsData.distanceTemperatureElevation.getValueBilinearInterpolation(this.distance,this.temperature)}get totalElevation(){return this.baseElevation+this.oldBarrelElevationCorrection+this.airPressureElevationCorrection+this.temperatureElevationCorrection}get windClock0to3(){return this.windClock<=3?this.windClock:this.windClock<=6?6-this.windClock:this.windClock<=9?this.windClock-6:12-this.windClock}get baseWindage(){return this.ballisticsData.distanceWindClockSpeedWindage.getValueTrilinearInterpolation(this.distance,this.windClock0to3,this.windSpeed)}get derivationWindageCorrection(){return this.ballisticsData.distanceDerivationWindage.getValueLinearInterpolation(this.distance)}get totalWindage(){return this.baseWindage+this.derivationWindageCorrection}get flightTime(){return this.ballisticsData.distanceFlightTime.getValueLinearInterpolation(this.distance)}get bulletEnergy(){return this.ballisticsData.distanceBulletEnergy.getValueLinearInterpolation(this.distance)}}function zt(e){const t=Math.round(e);return(t<0?"":"+")+t}function Gt(e){let t="";return e<0?t="neg":e>0&&(t="pos"),t+Math.round(Math.abs(e))}function Lt(e){return e<0?"windage-negative":e>0?"windage-positive":""}const At={id:"wrapper",class:"btn-outline-primary"},Zt={for:"clock-1"},Nt={for:"clock-2"},Ot={for:"clock-3"},Ut={for:"clock-4"},Wt={for:"clock-5"},Rt={for:"clock-6"},Bt={for:"clock-7"},Ft={for:"clock-8"},qt={for:"clock-9"},$t={for:"clock-10"},jt={for:"clock-11"},Yt={for:"clock-12"};function Ht(e,t,n,a,s,r){return(0,o.wg)(),(0,o.iD)("div",At,[(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-1",autocomplete:"off","onUpdate:modelValue":t[0]||(t[0]=e=>s.internalValue=e),value:1},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",Zt,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[1]||(t[1]=e=>r.setVal(1))},"1")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-2",autocomplete:"off","onUpdate:modelValue":t[2]||(t[2]=e=>s.internalValue=e),value:2},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",Nt,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[3]||(t[3]=e=>r.setVal(2))},"2")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-3",autocomplete:"off","onUpdate:modelValue":t[4]||(t[4]=e=>s.internalValue=e),value:3},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",Ot,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[5]||(t[5]=e=>r.setVal(3))},"3")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-4",autocomplete:"off","onUpdate:modelValue":t[6]||(t[6]=e=>s.internalValue=e),value:4},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",Ut,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[7]||(t[7]=e=>r.setVal(4))},"4")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-5",autocomplete:"off","onUpdate:modelValue":t[8]||(t[8]=e=>s.internalValue=e),value:5},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",Wt,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[9]||(t[9]=e=>r.setVal(5))},"5")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-6",autocomplete:"off","onUpdate:modelValue":t[10]||(t[10]=e=>s.internalValue=e),value:6},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",Rt,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[11]||(t[11]=e=>r.setVal(6))},"6")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-7",autocomplete:"off","onUpdate:modelValue":t[12]||(t[12]=e=>s.internalValue=e),value:7},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",Bt,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[13]||(t[13]=e=>r.setVal(7))},"7")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-8",autocomplete:"off","onUpdate:modelValue":t[14]||(t[14]=e=>s.internalValue=e),value:8},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",Ft,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[15]||(t[15]=e=>r.setVal(8))},"8")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-9",autocomplete:"off","onUpdate:modelValue":t[16]||(t[16]=e=>s.internalValue=e),value:9},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",qt,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[17]||(t[17]=e=>r.setVal(9))},"9")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-10",autocomplete:"off","onUpdate:modelValue":t[18]||(t[18]=e=>s.internalValue=e),value:10},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",$t,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[19]||(t[19]=e=>r.setVal(10))},"10")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-11",autocomplete:"off","onUpdate:modelValue":t[20]||(t[20]=e=>s.internalValue=e),value:11},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",jt,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[21]||(t[21]=e=>r.setVal(11))},"11")])]),(0,o.wy)((0,o._)("input",{type:"radio",name:"clock-radio",id:"clock-12",autocomplete:"off","onUpdate:modelValue":t[22]||(t[22]=e=>s.internalValue=e),value:12},null,512),[[i.G2,s.internalValue]]),(0,o._)("label",Yt,[(0,o._)("span",null,[(0,o._)("span",{onClick:t[23]||(t[23]=e=>r.setVal(12))},"12")])]),(0,o._)("div",{id:"highlight-bg",style:(0,l.j5)(r.cssVars)},null,4)])}const Kt={name:"ClockRadioGroup",props:["modelValue"],emits:["update:modelValue"],data(){return{internalValue:this.modelValue}},watch:{internalValue(){this.$emit("update:modelValue",this.internalValue)}},methods:{setVal(e){this.internalValue=e}},computed:{cssVars(){return{"--angle":30*this.internalValue-45}}}},Qt=()=>{(0,i.sj)((e=>({"684b9a4a":e.internalValue})))},Xt=Kt.setup;Kt.setup=Xt?(e,t)=>(Qt(),Xt(e,t)):Qt;var Jt=Kt;const en=(0,w.Z)(Jt,[["render",Ht],["__scopeId","data-v-b71a01d2"]]);var tn=en;const nn=e=>((0,o.dD)("data-v-b9cc8212"),e=e(),(0,o.Cn)(),e),on={class:"modal",tabindex:"-1",role:"dialog",id:"pointEditModal"},an={class:"modal-dialog",role:"document"},ln={class:"modal-content"},sn=nn((()=>(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title"},"Klicktabelle generieren"),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[(0,o._)("span",{"aria-hidden":"true",hidden:""},"×")])],-1))),rn={class:"modal-body"},un=nn((()=>(0,o._)("h5",null,"Distanz",-1))),dn={class:"mb-3 row"},cn={class:"col-4"},pn=nn((()=>(0,o._)("label",{for:"input-distance-min",class:"form-label"},"von",-1))),mn={class:"col-4"},hn=nn((()=>(0,o._)("label",{for:"input-distance-min",class:"form-label"},"inkrement",-1))),fn={class:"col-4"},bn=nn((()=>(0,o._)("label",{for:"input-distance-min",class:"form-label"},"bis",-1))),gn=nn((()=>(0,o._)("h5",null,"Umwelt",-1))),wn={class:"mb-3 row"},vn={class:"col-6"},yn=nn((()=>(0,o._)("label",{for:"input-air-pressure",class:"form-label"},"Luftdruck",-1))),_n={class:"col-6"},kn=nn((()=>(0,o._)("label",{for:"input-temperature",class:"form-label"},"Temperatur",-1))),Cn={class:"table table-striped"},In=nn((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Distanz"),(0,o._)("th",null,"Höhe"),(0,o._)("th",null,"Seite")])],-1))),Pn={class:"modal-footer"};function Vn(e,t,n,a,s,r){return(0,o.wg)(),(0,o.iD)("div",on,[(0,o._)("div",an,[(0,o._)("div",ln,[sn,(0,o._)("div",rn,[(0,o._)("form",null,[un,(0,o._)("div",dn,[(0,o._)("div",cn,[pn,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"input-distance-min","onUpdate:modelValue":t[0]||(t[0]=e=>s.distanceMin=e),min:"100",max:"1200"},null,512),[[i.nr,s.distanceMin]])]),(0,o._)("div",mn,[hn,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"input-distance-step","onUpdate:modelValue":t[1]||(t[1]=e=>s.distanceStep=e),min:"1",max:"1200"},null,512),[[i.nr,s.distanceStep]])]),(0,o._)("div",fn,[bn,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"input-distance-max","onUpdate:modelValue":t[2]||(t[2]=e=>s.distanceMax=e),min:"100",max:"1200"},null,512),[[i.nr,s.distanceMax]])])]),gn,(0,o._)("div",wn,[(0,o._)("div",vn,[yn,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"input-air-pressure","onUpdate:modelValue":t[3]||(t[3]=e=>s.airPressure=e)},null,512),[[i.nr,s.airPressure]])]),(0,o._)("div",_n,[kn,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"input-temperature","onUpdate:modelValue":t[4]||(t[4]=e=>s.temperature=e)},null,512),[[i.nr,s.temperature]])])])]),(0,o._)("table",Cn,[In,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.tableData,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:`row${e}`},[(0,o._)("td",null,(0,l.zw)(e.distance),1),(0,o._)("td",null,(0,l.zw)(e.elevation),1),(0,o._)("td",{class:(0,l.C_)(e.windageClass)},(0,l.zw)(e.windage),3)])))),128))])])]),(0,o._)("div",Pn,[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=e=>r.closeModal())},"Schliessen")])])])])}var Sn={name:"ClickTable",data(){return{modal:null,distanceMin:100,distanceMax:1200,distanceStep:50,tableData:[],airPressure:950,temperature:25}},methods:{openModal(){this.modal=new S.u_(document.getElementById("pointEditModal")),this.modal.show()},closeModal(){this.modal.hide(),this.modal=null},updateTable(){if(this.tableData=[],0===this.distanceStep||this.distanceMin<this.distanceMax&&this.distanceStep<0||this.distanceMin>this.distanceMax&&this.distanceStep>0)return;const e=new Dt;e.airPressure=this.airPressure,e.temperature=this.temperature;for(let t=this.distanceMin;t<=this.distanceMax;t+=this.distanceStep)e.distance=t,this.tableData.push({distance:`${t}m`,elevation:zt(e.totalElevation),windage:Gt(e.totalWindage),windageClass:Lt(e.totalWindage)})}},computed:{allInputs(){return[this.distanceMin,this.distanceStep,this.distanceMax,this.airPressure,this.temperature]}},watch:{allInputs(){this.updateTable()}},mounted(){this.updateTable()}};const xn=(0,w.Z)(Sn,[["render",Vn],["__scopeId","data-v-b9cc8212"]]);var En=xn,Mn={name:"BallisticsCalculator",computed:{BALLISTICS_DATA(){return Tt},BALLISTICS_DATA_WEAPONS(){return Mt}},components:{ClockRadioGroup:tn,ClickTable:En},data(){const e=(0,Ce.qj)(new Dt);return e.loadFromLocalStorage(),{situation:e}},watch:{situation:{deep:!0,handler(){this.situation.saveToLocalStorage()}}},methods:{formatElevationClicks:zt,formatWindageClicks:Gt,windageCssClass:Lt}};const Tn=(0,w.Z)(Mn,[["render",kt],["__scopeId","data-v-fdb41c62"]]);var Dn=Tn;const zn=e=>((0,o.dD)("data-v-30646c82"),e=e(),(0,o.Cn)(),e),Gn={class:"p-2"},Ln={id:"input-values"},An={class:"mb-3"},Zn=zn((()=>(0,o._)("div",{class:"col-3",id:"unknown-group-label"},"Unbekannt",-1))),Nn={class:"col-9"},On={class:"btn-group",role:"group","aria-label":"Unbekannt",id:"unknown-radio-group"},Un=zn((()=>(0,o._)("label",{class:"btn btn-outline-primary",for:"unknown-direction"},"Richtung",-1))),Wn=zn((()=>(0,o._)("label",{class:"btn btn-outline-primary",for:"unknown-target-coordinates"},"ZielKoord",-1))),Rn=zn((()=>(0,o._)("label",{class:"btn btn-outline-primary",for:"unknown-observer-coordinates"},"BeoKoord",-1))),Bn={key:0,class:"mb-3"},Fn=zn((()=>(0,o._)("label",{for:"observer-point-select"},"Beobachterpunkt",-1))),qn={class:"input-group"},$n=["value"],jn={class:"input-group-addon col-6 coordinate-select-display"},Yn={key:1,class:"mb-3"},Hn=zn((()=>(0,o._)("label",{for:"target-point-select"},"Zielpunkt",-1))),Kn={class:"input-group"},Qn=["value"],Xn={class:"input-group-addon col-6 coordinate-select-display"},Jn={class:"mb-3 row"},ei={class:"col-4"},ti=zn((()=>(0,o._)("label",{for:"input-azimut"},"Azimut",-1))),ni={class:"col-4"},ii=zn((()=>(0,o._)("label",{for:"input-gelwi"},"GelWi",-1))),oi={class:"col-4"},ai=zn((()=>(0,o._)("label",{for:"input-distance"},"Distanz visuell",-1))),li={key:2,class:"mb-3"},si=zn((()=>(0,o._)("h2",null,"Resultat",-1))),ri={key:0},ui=zn((()=>(0,o._)("td",null,"Azimut",-1))),di=zn((()=>(0,o._)("td",null,"Geländewinkel",-1))),ci=zn((()=>(0,o._)("td",null,"Distanz topografisch",-1))),pi=zn((()=>(0,o._)("td",null,"Distanz visuell",-1))),mi={key:1},hi={key:0},fi={key:1};function bi(e,t,n,a,s,r){const u=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",Gn,[(0,o._)("form",Ln,[(0,o._)("div",An,[Zn,(0,o._)("div",Nn,[(0,o._)("div",On,[(0,o._)("input",{type:"radio",class:"btn-check",name:"unknown-radio",id:"unknown-direction",autocomplete:"off",checked:"",onClick:t[0]||(t[0]=e=>r.unknownValueChangedTo("direction"))}),Un,(0,o._)("input",{type:"radio",class:"btn-check",name:"unknown-radio",id:"unknown-target-coordinates",autocomplete:"off",onClick:t[1]||(t[1]=e=>r.unknownValueChangedTo("target-coordinates"))}),Wn,(0,o._)("input",{type:"radio",class:"btn-check",name:"unknown-radio",id:"unknown-observer-coordinates",autocomplete:"off",onClick:t[2]||(t[2]=e=>r.unknownValueChangedTo("observer-coordinates"))}),Rn])])]),"observer-coordinates"!==s.currentUnknownValue?((0,o.wg)(),(0,o.iD)("div",Bn,[Fn,(0,o._)("div",qn,[(0,o.wy)((0,o._)("select",{class:"form-select col-6",id:"observer-point-select","onUpdate:modelValue":t[3]||(t[3]=e=>s.inpObserverPointNr=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.allPoints,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:t},(0,l.zw)(t)+" "+(0,l.zw)(e["description"]),9,$n)))),128))],512),[[i.bM,s.inpObserverPointNr]]),(0,o._)("div",jn,(0,l.zw)(null!=r.inpObserverPoint?r.formatCoordinates(r.inpObserverPoint):""),1)])])):(0,o.kq)("",!0),"target-coordinates"!==s.currentUnknownValue?((0,o.wg)(),(0,o.iD)("div",Yn,[Hn,(0,o._)("div",Kn,[(0,o.wy)((0,o._)("select",{class:"form-select",id:"target-point-select","onUpdate:modelValue":t[4]||(t[4]=e=>s.inpTargetPointNr=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.allPoints,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:t},(0,l.zw)(t)+" "+(0,l.zw)(e["description"]),9,Qn)))),128))],512),[[i.bM,s.inpTargetPointNr]]),(0,o._)("div",Xn,(0,l.zw)(null!=r.inpTargetPoint?r.formatCoordinates(r.inpTargetPoint):""),1)])])):(0,o.kq)("",!0),(0,o.wy)((0,o._)("div",Jn,[(0,o._)("div",ei,[ti,(0,o.wy)((0,o._)("input",{type:"number",id:"input-azimut",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>s.inpAzimut=e)},null,512),[[i.nr,s.inpAzimut]])]),(0,o._)("div",ni,[ii,(0,o.wy)((0,o._)("input",{type:"number",id:"input-gelwi",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>s.inpGelwi=e)},null,512),[[i.nr,s.inpGelwi]])]),(0,o._)("div",oi,[ai,(0,o.wy)((0,o._)("input",{type:"number",id:"input-distance",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>s.inpDistanceVisual=e)},null,512),[[i.nr,s.inpDistanceVisual]])])],512),[[i.F8,"direction"!==s.currentUnknownValue]]),s.hasResult?((0,o.wg)(),(0,o.iD)("div",li,[si,"direction"===s.currentUnknownValue?((0,o.wg)(),(0,o.iD)("div",ri,[(0,o._)("table",null,[(0,o._)("tr",null,[ui,(0,o._)("td",null,(0,l.zw)(r.formatArtilleryPromilleValue(s.resultAzimut)),1)]),(0,o._)("tr",null,[di,(0,o._)("td",null,(0,l.zw)(r.formatArtilleryPromilleValue(s.resultGelwi)),1)]),(0,o._)("tr",null,[ci,(0,o._)("td",null,(0,l.zw)(s.resultDistanceTopo)+"m",1)]),(0,o._)("tr",null,[pi,(0,o._)("td",null,(0,l.zw)(s.resultDistanceVisual)+"m",1)])])])):(0,o.kq)("",!0),"direction"!==s.currentUnknownValue?((0,o.wg)(),(0,o.iD)("div",mi,[(0,o._)("p",null," Distanz topografisch: "+(0,l.zw)(Math.round(this.resultDistanceTopo))+"m ",1),"observer-coordinates"===s.currentUnknownValue?((0,o.wg)(),(0,o.iD)("p",hi," Beobachterkoordinaten: "+(0,l.zw)(r.formatCoordinates(s.resultObserverCoordinates)),1)):(0,o.kq)("",!0),"target-coordinates"===s.currentUnknownValue?((0,o.wg)(),(0,o.iD)("p",fi," Zielkoordinaten: "+(0,l.zw)(r.formatCoordinates(s.resultTargetCoordinates)),1)):(0,o.kq)("",!0),(0,o._)("button",{class:"btn btn-primary",onClick:t[8]||(t[8]=t=>e.$router.push({path:"pointList",query:{intent:JSON.stringify({action:"create",coordinates:"observer-coordinates"===s.currentUnknownValue?s.resultObserverCoordinates:s.resultTargetCoordinates})}}))},[(0,o.Wm)(u,{icon:"fa-solid fa-floppy-disk"}),(0,o.Uk)(" Als neuen Punkt speichern ")])])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])])}var gi={name:"CoordinateCalculations",data(){return{currentUnknownValue:"direction",allPoints:Ie,inpObserverPointNr:null,inpTargetPointNr:null,inpAzimut:0,inpGelwi:0,inpDistanceVisual:0,hasResult:!1,resultAzimut:0,resultGelwi:0,resultDistanceVisual:0,resultDistanceTopo:0,resultObserverCoordinates:{},resultTargetCoordinates:{}}},methods:{formatArtilleryPromilleValue:de,formatCoordinates:le,unknownValueChangedTo(e){this.currentUnknownValue=e},updateResult(){if(this.hasResult=!1,"direction"===this.currentUnknownValue){if(null==this.inpObserverPoint||null==this.inpTargetPoint)return;let e=this.inpTargetPoint["x"]-this.inpObserverPoint["x"],t=this.inpTargetPoint["y"]-this.inpObserverPoint["y"],n=this.inpTargetPoint["z"]-this.inpObserverPoint["z"];this.resultDistanceTopo=Math.round(Math.sqrt(e*e+t*t)),this.resultDistanceVisual=Math.round(Math.sqrt(e*e+t*t+n*n)),this.resultAzimut=(Math.PI/2-Math.atan2(t,e))/Math.PI*3200,this.resultGelwi=Math.atan(n/this.resultDistanceTopo)/Math.PI*3200}else{let e=Math.round(this.inpGelwi)%6400/3200*Math.PI,t=Math.sin(e)*this.inpDistanceVisual;this.resultDistanceTopo=Math.sqrt(this.inpDistanceVisual*this.inpDistanceVisual-t*t);let n=Math.round(1600-this.inpAzimut)%6400/3200*Math.PI,i=Math.cos(n)*this.resultDistanceTopo,o=Math.sin(n)*this.resultDistanceTopo,a="target-coordinates"===this.currentUnknownValue,l=a?this.inpObserverPoint:this.inpTargetPoint;if(null==l)return;let s=a?1:-1,r={x:l["x"]+i*s,y:l["y"]+o*s,z:l["z"]+t*s};a?this.resultTargetCoordinates=r:this.resultObserverCoordinates=r}this.hasResult=!0}},computed:{allInputs(){return[this.currentUnknownValue,this.inpObserverPointNr,this.inpTargetPointNr,this.inpAzimut,this.inpGelwi,this.inpDistanceVisual]},inpObserverPoint(){return null!=this.inpObserverPointNr?Ie[this.inpObserverPointNr]["coordinates"]:null},inpTargetPoint(){return null!=this.inpTargetPointNr?Ie[this.inpTargetPointNr]["coordinates"]:null}},watch:{allInputs(){this.updateResult()}}};const wi=(0,w.Z)(gi,[["render",bi],["__scopeId","data-v-30646c82"]]);var vi=wi;const yi=e=>((0,o.dD)("data-v-ff30412c"),e=e(),(0,o.Cn)(),e),_i={ref:"map_root",id:"map-root"},ki={class:"popup-content",ref:"popupContentPoint"},Ci={class:"btn-group btn-group-sm",role:"group"},Ii={class:"btn-group",role:"group"},Pi=yi((()=>(0,o._)("button",{id:"openInDropdown",type:"button",class:"btn btn-secondary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"}," Öffnen in ",-1))),Vi={key:0,class:"dropdown-menu","aria-labelledby":"openInDropdown"},Si=["href"],xi=["href"],Ei={id:"map-controls"},Mi={class:"btn-group-vertical",role:"group"},Ti={class:"btn-group dropstart",role:"group"},Di={id:"map-type-drop",type:"button",class:"btn btn-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false","aria-label":"Map Layer Chooser"},zi={class:"dropdown-menu","aria-labelledby":"map-type-drop"},Gi=["onClick"];function Li(e,t,n,i,a,s){const r=(0,o.up)("font-awesome-icon"),u=(0,o.up)("MapPopupPointInfo"),d=(0,o.up)("font-awesome-layers");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",_i,null,512),(0,o._)("div",{id:"popup-root",class:(0,l.C_)(["ol-popup",{shown:s.overlayShowing}]),ref:"popupContainer"},[(0,o._)("a",{id:"popup-closer",class:"ol-popup-closer",onClick:t[0]||(t[0]=e=>s.overlayShowing=!1)},[(0,o.Wm)(r,{icon:"fa-solid fa-xmark"})]),(0,o._)("div",ki,[null!=s.currentOverlayPoint?((0,o.wg)(),(0,o.j4)(u,{key:0,coordinates:s.currentOverlayPoint.coordinates,title:s.currentOverlayPoint?.description},null,8,["coordinates","title"])):(0,o.kq)("",!0),null!=a.temporaryPointCoordinates?((0,o.wg)(),(0,o.j4)(u,{key:1,coordinates:a.temporaryPointCoordinates,title:"Temporärer Punkt"},null,8,["coordinates"])):(0,o.kq)("",!0),(0,o._)("div",Ci,[null!=s.currentOverlayPoint?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn-primary",onClick:t[1]||(t[1]=t=>e.$router.push({path:"pointList",query:{intent:JSON.stringify({action:"edit",nr:a.currentOverlayPointId})}}))},[(0,o.Wm)(r,{icon:"fa-solid fa-pen"})])):(0,o.kq)("",!0),null!=s.currentOverlayPoint?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn btn-danger",onClick:t[2]||(t[2]=e=>{s.deletePoint(a.currentOverlayPointId),a.currentOverlayPointId=null})},[(0,o.Wm)(r,{icon:"fa-solid fa-trash-can"})])):(0,o.kq)("",!0),null!=a.temporaryPointCoordinates?((0,o.wg)(),(0,o.iD)("button",{key:2,class:"btn btn-primary",onClick:t[3]||(t[3]=t=>e.$router.push({path:"pointList",query:{intent:JSON.stringify({action:"create",coordinates:a.temporaryPointCoordinates})}}))},[(0,o.Wm)(r,{icon:"fa-solid fa-floppy-disk"})])):(0,o.kq)("",!0),(0,o._)("div",Ii,[Pi,null!=s.currentPopupPointCoordinates?((0,o.wg)(),(0,o.iD)("ul",Vi,[(0,o._)("li",null,[(0,o._)("a",{class:"dropdown-item",target:"_blank",href:s.createSwissTopoLink(s.currentPopupPointCoordinates,a.currentMapZoom)}," SwissTopo ",8,Si)]),(0,o._)("li",null,[(0,o._)("a",{class:"dropdown-item",target:"_blank",href:s.createGoogleMapsLink(s.LV03toWGS84(s.currentPopupPointCoordinates),a.currentMapZoom)}," Google Maps ",8,xi)])])):(0,o.kq)("",!0)])])],512)],2),(0,o._)("div",Ei,[(0,o._)("div",Mi,[a.showingCurrentLocation?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"button",class:"btn btn-primary","aria-label":"Disable showing GPS position",onClick:t[4]||(t[4]=e=>a.showingCurrentLocation=!1)},[(0,o.Wm)(r,{icon:"fa-solid fa-location-crosshairs"})])):((0,o.wg)(),(0,o.iD)("button",{key:1,type:"button",class:"btn btn-primary","aria-label":"Enable showing GPS position",onClick:t[5]||(t[5]=e=>a.showingCurrentLocation=!0)},[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{icon:"fa-solid fa-slash",transform:"left-2"}),(0,o.Wm)(r,{icon:"fa-solid fa-location-crosshairs"})])),_:1})])),(0,o._)("button",{type:"button",class:"btn btn-secondary","aria-label":"Zoom in",onClick:t[6]||(t[6]=e=>this.currentMapZoom+=1)},[(0,o.Wm)(r,{icon:"fa-solid fa-magnifying-glass-plus"})]),(0,o._)("button",{type:"button",class:"btn btn-secondary","aria-label":"Zoom out",onClick:t[7]||(t[7]=e=>this.currentMapZoom-=1)},[(0,o.Wm)(r,{icon:"fa-solid fa-magnifying-glass-minus"})]),(0,o._)("div",Ti,[(0,o._)("button",Di,[(0,o.Wm)(r,{icon:"fa-solid fa-layer-group"})]),(0,o._)("ul",zi,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.mapLayerNames,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e.id},[(0,o._)("button",{class:(0,l.C_)(["dropdown-item",{active:a.activeMapLayer===e.id}]),onClick:t=>s.setActiveMapLayer(e.id)},(0,l.zw)(e.displayName),11,Gi)])))),128))])])])])],64)}var Ai=n(7793),Zi=n(1095),Ni=n(8039),Oi=n(1739),Ui=n(4609),Wi=n(1631),Ri=n(225),Bi=n(9688),Fi=n(7053),qi=n(5400),$i=n(5459),ji=n(825),Yi=n(2283),Hi=n(5315),Ki=n(2377),Qi=n(1508),Xi=n(2949),Ji=n(5409),eo=n(2205),to=n(6241),no=n(7712),io=n(7983),oo=n(9966);const ao=(0,o._)("th",{scope:"row"},"LV03:",-1),lo=(0,o._)("th",{scope:"row"},"WGS84:",-1),so={scope:"row"};function ro(e,t,n,i,a,s){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("h4",null,(0,l.zw)(n.title),1),(0,o._)("table",null,[(0,o._)("tr",null,[ao,(0,o._)("td",null,(0,l.zw)(s.formatCoordinatesLV03(n.coordinates)),1)]),(0,o._)("tr",null,[lo,(0,o._)("td",null,(0,l.zw)(s.formatCoordinatesWGS84Decimal(s.LV03toWGS84(n.coordinates))),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.getUserGridIdentifiers(),(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e[0]},[(0,o._)("th",so,(0,l.zw)(e[1]),1),(0,o._)("td",null,(0,l.zw)(e[2]),1)])))),128))])],64)}var uo,co=n(2113);(function(e){e[e["NUMBERS"]=0]="NUMBERS",e[e["EXCEL_LETTERS"]=1]="EXCEL_LETTERS"})(uo||(uo={}));class po{constructor(e){this.id=-1,this.name="Neues Führungsraster",this.xAxis=new mo({numberingScheme:uo.EXCEL_LETTERS}),this.yAxis=new mo({numberingScheme:uo.NUMBERS}),this.cellQuadrantLetters=["A","B","D","C"],this.refPoint0Coords={x:0,y:0,z:0},this.refPoint1Coords={x:0,y:0,z:0},this.refPoint0Identifier="",this.refPoint1Identifier="",e&&(Object.assign(this,e),this.xAxis=new mo(e.xAxis),this.yAxis=new mo(e.yAxis))}splitIdentifier(e){const t=[];if(!e)throw new ho(e);let n=0,i=_e(e[0]);for(let o=0;o<e.length;o++)_e(e[o])!=i&&(n<o&&t.push(e.substring(n,o)),n=o,i=_e(e[o]));if(n<e.length&&t.push(e.substring(n)),t.length<2)throw new ho(e);return(_e(t[0])&&this.xAxis.numberingScheme===uo.EXCEL_LETTERS||_e(t[1])&&this.yAxis.numberingScheme==uo.EXCEL_LETTERS)&&([t[0],t[1]]=[t[1],t[0]]),t}identifierToIndex(e){const t=this.splitIdentifier(e);return{xColumn:this.xAxis.convertIdentifierToIndex(t[0]),yRow:this.yAxis.convertIdentifierToIndex(t[1]),quadrant:null!==this.cellQuadrantLetters?this.cellQuadrantLetters.indexOf(t[2]):-1}}indexToIdentifier(e){const t=this.xAxis.convertIndexToIdentifier(e.xColumn)+this.yAxis.convertIndexToIdentifier(e.yRow);return null!=this.cellQuadrantLetters&&0<=e.quadrant&&e.quadrant<=3?t+this.cellQuadrantLetters[e.quadrant]:t}getCellSize(){const e=this.identifierToIndex(this.refPoint0Identifier),t=this.identifierToIndex(this.refPoint1Identifier),n=t.xColumn-e.xColumn,i=t.yRow-e.yRow,o=this.refPoint1Coords.x-this.refPoint0Coords.x,a=this.refPoint1Coords.y-this.refPoint0Coords.y,l=Math.sqrt(co.h62(o)+co.h62(a)),s=Math.sqrt(co.h62(n)+co.h62(i));return l/s}validateValues(){const e=[],t=this.identifierToIndex(this.refPoint0Identifier),n=this.identifierToIndex(this.refPoint1Identifier),i=n.xColumn-t.xColumn,o=n.yRow-t.yRow,a=this.refPoint1Coords.x-this.refPoint0Coords.x,l=this.refPoint1Coords.y-this.refPoint0Coords.y,s=180*co.fvJ(o,i)/Math.PI,r=180*co.fvJ(l,a)/Math.PI,u=Math.abs(s-r);return u>4&&e.push(`Das Führungsraster ist nicht nach Norden gerichtet. Die Abweichung beträgt ${u}°. Resultate können ungenau sein`),e}indexToCoords(e){const t=this.identifierToIndex(this.refPoint0Identifier),n=this.getCellSize();let i=e.xColumn,o=e.yRow;return-1!=e.quadrant&&(i+=0==e.quadrant||4==e.quadrant?-.25:.25,o+=0==e.quadrant||1==e.quadrant?-.25:.25),{x:this.refPoint0Coords.x+n*(i-t.xColumn),y:this.refPoint0Coords.y-n*(o-t.yRow),z:0}}coordsToIndex(e,t=!0){const n=this.identifierToIndex(this.refPoint0Identifier),i=this.getCellSize(),o=n.xColumn+(e.x-this.refPoint0Coords.x)/i,a=n.yRow-(e.y-this.refPoint0Coords.y)/i;if(t&&(o<-.5||o>this.xAxis.size()-.5||a<-.5||a>this.yAxis.size()-.5))return null;let l;const s=o<Math.round(o),r=a<Math.round(a);return l=s?r?0:3:r?1:2,{xColumn:Math.round(o),yRow:Math.round(a),quadrant:l}}}class mo{constructor(e){e.numberingScheme==uo.NUMBERS?(this.firstIdentifier="1",this.lastIdentifier="10"):(this.firstIdentifier="A",this.lastIdentifier="J"),Object.assign(this,e)}firstIdentifierIndexWithoutOffset(){return this.numberingScheme==uo.NUMBERS?parseInt(this.firstIdentifier):fo(this.firstIdentifier)}lastIdentifierIndexWithoutOffset(){return this.numberingScheme==uo.NUMBERS?parseInt(this.lastIdentifier):fo(this.lastIdentifier)}size(){return this.lastIdentifierIndexWithoutOffset()-this.firstIdentifierIndexWithoutOffset()+1}convertIdentifierToIndex(e){return this.convertIdentifierToIndexWithoutOffset(e)-this.firstIdentifierIndexWithoutOffset()}convertIndexToIdentifier(e){const t=this.firstIdentifierIndexWithoutOffset()+e;return this.numberingScheme==uo.NUMBERS?t.toString():bo(t)}getTitles(){const e=[];for(let t=0;t<this.size();t++)e.push(this.convertIndexToIdentifier(t));return e}convertIdentifierToIndexWithoutOffset(e){return this.numberingScheme==uo.NUMBERS?parseInt(e):fo(e)}}class ho extends Error{constructor(e){super(`The identifier ${e} is invalid`),Object.setPrototypeOf(this,ho.prototype)}}function fo(e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];t*=26,t+=i.charCodeAt(0)-"A".charCodeAt(0)+1}return t-1}function bo(e){let t="";while(e>=0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[e%26]+t,e=Math.floor(e/26)-1;return t}const go=(0,Ce.qj)(vo());function wo(){localStorage.setItem("userGrids",JSON.stringify(go))}function vo(){const e=localStorage.getItem("userGrids");if(null===e)return[];{const t=JSON.parse(e);t.sort(((e,t)=>e.id-t.id));const n=[];for(const e of t)n.push(new po(e));return n}}function yo(e){return we(go,"id",e)}function _o(e){if(e.id<0)e.id=0==go.length?1:go[go.length-1].id+1,go.push(e);else{const t=ve(go,"id",e.id);null!=t?go[t]=e:go.push(e)}}function ko(e){const t=ve(go,"id",e);null!=t&&go.splice(t,1)}(0,o.YP)(go,(()=>wo()));var Co={name:"MapPopupPointInfo",methods:{LV03toWGS84:ce,formatCoordinatesWGS84Decimal:ue,formatCoordinatesLV03:le,getUserGridIdentifiers(){const e=[];return go.forEach((t=>{const n=t.coordsToIndex(this.coordinates);null!=n&&e.push([t.id,t.name,t.indexToIdentifier(n)])})),e}},props:{title:String,coordinates:{type:Object}}};const Io=(0,w.Z)(Co,[["render",ro]]);var Po=Io;const Vo="https://wmts.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg",So="https://wmts.geo.admin.ch/1.0.0/ch.swisstopo.swissimage/default/current/3857/{z}/{x}/{y}.jpeg",xo="https://vectortiles.geo.admin.ch/styles/ch.swisstopo.leichte-basiskarte.vt/style.json",Eo="https://vectortiles.geo.admin.ch/tiles/ch.swisstopo.leichte-basiskarte.vt/v2.0.0/{z}/{x}/{y}.pbf",Mo="POINT",To="CURRENT_LOCATION",Do="POINT",zo="TEMPORARY",Go=e=>[new eo.ZP({image:new to.Z({radius:10,fill:new no.Z({color:"#ff0000"})}),text:new io.Z({font:"1.5rem Avenir,sans-serif",fill:new no.Z({color:"#ff0000"}),stroke:new oo.Z({color:"#fff",width:4}),offsetY:-18,text:e.get("name")})})],Lo=e=>[new eo.ZP({image:new to.Z({radius:8,fill:new no.Z({color:"#0000ff"}),stroke:new oo.Z({color:"#ffffff"})})})],Ao=e=>[new eo.ZP({stroke:new oo.Z({width:2,color:"#ff0000"}),text:new io.Z({font:"1.5rem Avenir,sans-serif",fill:new no.Z({color:"#ff0000"}),stroke:new oo.Z({color:"#fff",width:4}),offsetY:0,text:e.get("txt")})})];var Zo={name:"MapView",components:{FontAwesomeLayers:P.NH,MapPopupPointInfo:Po,FontAwesomeIcon:P.GN},props:{},data(){let e="pixel";return{mapLayers:{},activeMapLayer:e,overlay:null,currentOverlayPointId:null,temporaryPointCoordinates:null,temporaryPointUserGridIdentifiers:{},map:null,currentMapZoom:12,showingCurrentLocation:!1,pointsSource:null,currentLocationSource:null,userGridSource:null,geolocationWatchId:null,mapLayerNames:[{id:"osm",displayName:"OpenStreetMap"},{id:"pixel",displayName:"SwissTopo Pixel"},{id:"vector",displayName:"SwissTopo Vektor"},{id:"satellite",displayName:"SwissTopo Satellit"}],OVERLAY_TYPE_POINT:Do,OVERLAY_TYPE_TEMPORARY:zo}},mounted:async function(){let e=new Ui.Z({declutter:!0,source:new Wi.Z({format:new Fi.Z,url:Eo,projection:"EPSG:3857"}),style:xo});await(0,qi.bg)(e,xo),this.mapLayers.vector=new Yi.Z({layers:[e]}),await(0,qi.nn)(this.mapLayers.vector,xo),this.mapLayers.osm=new Ni.Z({source:new Oi.Z}),this.mapLayers.pixel=new Ni.Z({source:new Ri.Z({url:Vo})}),this.mapLayers.satellite=new Yi.Z({layers:[new Ni.Z({source:new Ri.Z({url:So})})]}),this.pointsSource=new Bi.Z({features:[]}),this.updatePoints(),(0,o.YP)(Ie,this.updatePoints);let t=new Hi.Z({source:this.pointsSource,style:Go});t.setZIndex(100),this.overlay=new Ki.Z({element:this.$refs.popupContainer,autoPan:{animation:{duration:250}}}),this.currentLocationSource=new Bi.Z({features:[]});const n=new Hi.Z({source:this.currentLocationSource,style:Lo});this.userGridSource=new Bi.Z({features:[]}),this.updateUserGrids(),(0,o.YP)(go,this.updateUserGrids);const i=new Hi.Z({source:this.userGridSource,style:Ao});this.map=new Zi.Z({target:this.$refs.map_root,layers:[this.mapLayers[this.activeMapLayer],i,t,n],view:new Ai.ZP({zoom:this.currentMapZoom,center:(0,$i.vs)([9,47],"EPSG:4326","EPSG:3857"),constrainResolution:!0,projection:"EPSG:3857",showFullExtent:!0,maxZoom:18,maxResolution:78271.51696402048}),controls:(0,ji.c)({attribution:!1,zoom:!1,rotate:!1}),overlays:[this.overlay]}),this.map.on("moveend",(()=>{this.currentMapZoom=this.map.getView().getZoom();const e={center:this.map.getView().getCenter(),zoom:this.map.getView().getZoom(),rotation:this.map.getView().getRotation()};localStorage.setItem("mapPosition",JSON.stringify(e))})),this.map.on("singleclick",this.handleSingleClickOnMap);const a=localStorage.getItem("mapPosition");if(a){const e=JSON.parse(a);this.map.getView().setCenter(e.center),this.map.getView().setZoom(e.zoom),this.map.getView().setRotation(e.rotation),console.info("got initial map center, zoom and rotation from localStorage")}else navigator.geolocation.getCurrentPosition((e=>{let t=[e.coords.longitude,e.coords.latitude];this.map.getView().setCenter((0,$i.vs)(t,"EPSG:4326","EPSG:3857")),console.info("got initial map center from GPS ",t)}),(e=>{console.info("didn't get GPS position: ",e)}),{enableHighAccuracy:!0,maximumAge:1e5})},methods:{LV03toWGS84:ce,createGoogleMapsLink:ge,createSwissTopoLink:be,formatCoordinates:le,setActiveMapLayer(e){this.map.removeLayer(this.mapLayers[this.activeMapLayer]),this.map.addLayer(this.mapLayers[e]),this.activeMapLayer=e},LV03toEPSG3857(e){const t=ce(e);return(0,$i.vs)([t.longitude,t.latitude],"EPSG:4326","EPSG:3857")},EPSG3857toLV03(e){const t=(0,$i.vs)(e,"EPSG:3857","EPSG:4326");return pe({latitude:t[1],longitude:t[0],height:0})},handleSingleClickOnMap(e){const t=e.coordinate,n=this.map.forEachFeatureAtPixel(e.pixel,((e,t)=>{if(e.get("type")===Mo)return this.currentOverlayPointId=e.get("pointId"),!0}));n||(this.temporaryPointCoordinates=this.EPSG3857toLV03(t),he(this.temporaryPointCoordinates.x,this.temporaryPointCoordinates.y,(e=>{this.temporaryPointCoordinates.z=e}),console.log))},deletePoint(e){delete Ie[e]},updatePoints(){this.pointsSource.clear(),Object.keys(Ie).forEach((e=>{const t=Ie[e],n=ce(t.coordinates);this.pointsSource.addFeature(new Qi.Z({name:t.description,geometry:new Xi.Z((0,$i.vs)([n.longitude,n.latitude],"EPSG:4326","EPSG:3857")),type:Mo,pointId:e}))}))},updateUserGrids(){this.userGridSource.clear();for(const e of go){const t=[],n={xColumn:-.5,yRow:-.5,quadrant:-1},i={xColumn:-.5,yRow:e.yAxis.size()-.5,quadrant:-1};for(let o=0;o<e.xAxis.size()+1;o++)if(n.xColumn=o-.5,i.xColumn=o-.5,t.push([this.LV03toEPSG3857(e.indexToCoords(n)),this.LV03toEPSG3857(e.indexToCoords(i))]),o<e.xAxis.size())for(let t of[n,i])t.xColumn=o,this.userGridSource.addFeature(new Qi.Z({geometry:new Xi.Z(this.LV03toEPSG3857(e.indexToCoords(t))),txt:e.xAxis.convertIndexToIdentifier(o)}));n.xColumn=-.5,i.xColumn=e.xAxis.size()-.5;for(let o=0;o<e.yAxis.size()+1;o++)if(n.yRow=o-.5,i.yRow=o-.5,t.push([this.LV03toEPSG3857(e.indexToCoords(n)),this.LV03toEPSG3857(e.indexToCoords(i))]),o<e.yAxis.size())for(let t of[n,i])t.yRow=o,this.userGridSource.addFeature(new Qi.Z({geometry:new Xi.Z(this.LV03toEPSG3857(e.indexToCoords(t))),txt:e.yAxis.convertIndexToIdentifier(o)}));this.userGridSource.addFeature(new Qi.Z({geometry:new Ji.Z(t),name:e.name}))}}},watch:{temporaryPointCoordinates:function(e){null!==e&&(this.currentOverlayPointId=null,this.overlay.setPosition(this.LV03toEPSG3857(e)))},currentOverlayPointId:function(e){null!=e&&(this.temporaryPointCoordinates=null,this.overlay.setPosition(this.LV03toEPSG3857(Ie[e].coordinates)))},currentMapZoom:function(e){this.map.getView().animate({zoom:e,duration:100})},showingCurrentLocation:function(e){if(e){const e=new Qi.Z({geometry:new Xi.Z([0,0]),type:To,style:new eo.ZP(null)});this.geolocationWatchId=navigator.geolocation.watchPosition((t=>{console.log(t),e.getGeometry().setCoordinates((0,$i.vs)([t.coords.longitude,t.coords.latitude],"EPSG:4326","EPSG:3857")),e.setStyle(null)}),(t=>{console.log(t),e.setStyle(new eo.ZP(null))})),this.currentLocationSource.addFeature(e)}else this.currentLocationSource.clear(),null!=this.geolocationWatchId&&(navigator.geolocation.clearWatch(this.geolocationWatchId),this.geolocationWatchId=null)}},computed:{currentPopupPointCoordinates(){return null!=this.currentOverlayPoint?this.currentOverlayPoint.coordinates:this.temporaryPointCoordinates},currentOverlayPoint(){return Ie[this.currentOverlayPointId]},overlayShowing:{set(e){e||(this.currentOverlayPointId=null,this.temporaryPointCoordinates=null)},get(){return null!=this.currentOverlayPointId||null!=this.temporaryPointCoordinates}}}};const No=(0,w.Z)(Zo,[["render",Li],["__scopeId","data-v-ff30412c"]]);var Oo=No;n(862),n(5689),n(4179);Object.freeze({WEBCAM:"WEBCAM",FILE_IMPORT:"FILE_IMPORT"}),Object.freeze({EXIF_GPS:"EXIF_GPS",POINT:"POINT"});const Uo={class:"p-2"},Wo={class:"table table-striped table-bordered table-sm mt-2"},Ro=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"Name"),(0,o._)("th",{scope:"col"},"Grösse"),(0,o._)("th",{scope:"col"})])],-1),Bo={scope:"row"},Fo={class:"btn-group",role:"group","aria-label":"Aktionen {{gridDef.name}}"},qo=["onClick"],$o=["onClick"],jo={class:"modal",tabindex:"-1",role:"dialog",id:"gridEditModal",ref:"divModal"},Yo={class:"modal-dialog",role:"document"},Ho={class:"modal-content"},Ko={class:"modal-header"},Qo={key:0,class:"modal-title"},Xo=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[(0,o._)("span",{"aria-hidden":"true",hidden:""},"×")],-1),Jo={class:"modal-body"},ea={class:"modal-footer"};function ta(e,t,n,i,a,s){const r=(0,o.up)("font-awesome-icon"),u=(0,o.up)("UserGridForm");return(0,o.wg)(),(0,o.iD)("div",Uo,[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=e=>s.newGrid())},[(0,o.Wm)(r,{icon:"fa-solid fa-plus"}),(0,o.Uk)(" Neues Führungsraster ")]),(0,o._)("table",Wo,[Ro,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.allUserGrids,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("th",Bo,(0,l.zw)(e.name),1),(0,o._)("td",null,(0,l.zw)(e.xAxis.size())+"×"+(0,l.zw)(e.yAxis.size()),1),(0,o._)("td",null,[(0,o._)("div",Fo,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary btn-sm edit-grid-button",onClick:t=>s.startEditGrid(e.id),"aria-label":"Bearbeite {{gridDef.name}}"},[(0,o.Wm)(r,{icon:"fa-solid fa-pen"})],8,qo),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary btn-sm edit-grid-button",onClick:t=>s.deleteUserGridDefinition(e.id),"aria-label":"Lösche {{gridDef.name}}"},[(0,o.Wm)(r,{icon:"fa-solid fa-trash-can"})],8,$o)])])])))),128))])]),(0,o._)("div",jo,[(0,o._)("div",Yo,[(0,o._)("div",Ho,[(0,o._)("div",Ko,[null!=a.currentlyEditingGrid?((0,o.wg)(),(0,o.iD)("h5",Qo," Führungsraster "+(0,l.zw)(a.currentlyEditingGrid.name)+" bearbeiten ",1)):(0,o.kq)("",!0),Xo]),(0,o._)("div",Jo,[null!=a.currentlyEditingGrid?((0,o.wg)(),(0,o.j4)(u,{value:a.currentlyEditingGrid,onValueChange:s.editingGridChanged,key:a.currentlyEditingGrid.id},null,8,["value","onValueChange"])):(0,o.kq)("",!0)]),(0,o._)("div",ea,[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=e=>{s.saveChangesFromModal(),a.modal.hide()})}," Speichern "),(0,o._)("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=e=>a.modal.hide())}," Abbrechen ")])])])],512)])}const na={ref:"form",class:"was-validated"},ia={class:"mb-3"},oa=(0,o._)("label",{for:"modalInputName",class:"form-label"},"Name",-1),aa={class:"mb-3"},la=(0,o._)("label",{for:"numberingSchemeGroup",class:"form-label"},"Nummerierung",-1),sa={class:"input-group",id:"numberingSchemeGroup"},ra={class:"col-6 pe-3"},ua=(0,o._)("label",{for:"inpColNumberScheme"},"Spalten",-1),da=["value"],ca=["value"],pa={class:"col-6"},ma=(0,o._)("label",{for:"inpRowNumberScheme"},"Zeilen",-1),ha=["value"],fa=["value"],ba={class:"mb-3"},ga={class:"input-group",id:"cornerCellIdentifierGroup"},wa={class:"col pe-3"},va=(0,o._)("label",{for:"firstColName",class:"form-label"},"erster Spaltenname",-1),ya={class:"col"},_a=(0,o._)("label",{for:"lastColName",class:"form-label"},"letzter Spaltenname",-1),ka={class:"mb-3"},Ca={class:"input-group",id:"cornerCellIdentifierGroup"},Ia={class:"col pe-3"},Pa=(0,o._)("label",{for:"firstRowName",class:"form-label"},"erster Zeilenname",-1),Va={class:"col"},Sa=(0,o._)("label",{for:"lastRowName",class:"form-label"},"letzter Zeilenname",-1),xa={class:"mb-3"},Ea={class:"form-check"},Ma=(0,o._)("label",{for:"inpQuadrantLettersActive",class:"form-check-label"},"Zellen in Quadrante unterteilen",-1),Ta={key:0},Da=["onUpdate:modelValue"],za={class:"mb-3"},Ga=(0,o._)("label",{class:"form-label"},"Referenzpunkt 1",-1),La=(0,o._)("label",{for:"refPoint0Input",class:"form-label"},"Koordinaten",-1),Aa=(0,o._)("label",{for:"refPoint0IdentifierInput",class:"form-label"},"Bezeichnung",-1),Za={class:"mb-3"},Na=(0,o._)("label",{class:"form-label"},"Referenzpunkt 2",-1),Oa=(0,o._)("label",{for:"refPoint1Input",class:"form-label"},"Koordinaten",-1),Ua=(0,o._)("label",{for:"refPoint1IdentifierInput",class:"form-label"},"Bezeichnung",-1),Wa={class:"mb-3"},Ra=(0,o._)("label",{class:"form-label"},"Kontrolle",-1),Ba={class:"row"},Fa=(0,o._)("span",{class:"col-3"},"Zeilen",-1),qa={class:"col"},$a={class:"row"},ja=(0,o._)("span",{class:"col-3"},"Spalten",-1),Ya={class:"col"},Ha={class:"row"},Ka=(0,o._)("span",{class:"col-3"},"Zellengrösse",-1),Qa={class:"col"};function Xa(e,t,n,a,s,r){const u=(0,o.up)("PointInput");return(0,o.wg)(),(0,o.iD)("form",na,[(0,o._)("div",ia,[oa,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"modalInputName","onUpdate:modelValue":t[0]||(t[0]=e=>s.mutableValue.name=e),required:""},null,512),[[i.nr,s.mutableValue.name]])]),(0,o._)("div",aa,[la,(0,o._)("div",sa,[(0,o._)("div",ra,[ua,(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"Spaltennummerierung","onUpdate:modelValue":t[1]||(t[1]=e=>s.mutableValue.xAxis.numberingScheme=e),id:"inpColNumberScheme",required:""},[(0,o._)("option",{value:s.NumberingScheme.EXCEL_LETTERS},"Buchstaben",8,da),(0,o._)("option",{value:s.NumberingScheme.NUMBERS},"Zahlen",8,ca)],512),[[i.bM,s.mutableValue.xAxis.numberingScheme]])]),(0,o._)("div",pa,[ma,(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"Zeilennummerierung","onUpdate:modelValue":t[2]||(t[2]=e=>s.mutableValue.yAxis.numberingScheme=e),id:"inpRowNumberScheme",required:""},[(0,o._)("option",{value:s.NumberingScheme.EXCEL_LETTERS},"Buchstaben",8,ha),(0,o._)("option",{value:s.NumberingScheme.NUMBERS},"Zahlen",8,fa)],512),[[i.bM,s.mutableValue.yAxis.numberingScheme]])])])]),(0,o._)("div",ba,[(0,o._)("div",ga,[(0,o._)("div",wa,[va,(0,o.wy)((0,o._)("input",{id:"firstColName",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>s.mutableValue.xAxis.firstIdentifier=e),ref:"firstColName",required:""},null,512),[[i.nr,s.mutableValue.xAxis.firstIdentifier]])]),(0,o._)("div",ya,[_a,(0,o.wy)((0,o._)("input",{id:"lastColName",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>s.mutableValue.xAxis.lastIdentifier=e),ref:"lastColName",required:""},null,512),[[i.nr,s.mutableValue.xAxis.lastIdentifier]])])])]),(0,o._)("div",ka,[(0,o._)("div",Ca,[(0,o._)("div",Ia,[Pa,(0,o.wy)((0,o._)("input",{id:"firstRowName",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>s.mutableValue.yAxis.firstIdentifier=e),ref:"firstRowName",required:""},null,512),[[i.nr,s.mutableValue.yAxis.firstIdentifier]])]),(0,o._)("div",Va,[Sa,(0,o.wy)((0,o._)("input",{id:"lastRowName",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>s.mutableValue.yAxis.lastIdentifier=e),ref:"lastRowName",required:""},null,512),[[i.nr,s.mutableValue.yAxis.lastIdentifier]])])])]),(0,o._)("div",xa,[(0,o._)("div",Ea,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>s.hasQuadrantLetters=e),ref:"inpQuadrantLettersActive",id:"inpQuadrantLettersActive",class:"form-check-input"},null,512),[[i.e8,s.hasQuadrantLetters]]),Ma]),s.hasQuadrantLetters?((0,o.wg)(),(0,o.iD)("div",Ta,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(4,(e=>(0,o._)("div",{class:(0,l.C_)({"col-6":!0,"d-inline-block":!0,"pe-2":e%2===1,"pb-2":e%2===0}),key:e},[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>s.mutableValue.cellQuadrantLetters[e<3?e-1:3===e?3:2]=t,class:"form-control",required:""},null,8,Da),[[i.nr,s.mutableValue.cellQuadrantLetters[e<3?e-1:3===e?3:2]]])],2))),64))])):(0,o.kq)("",!0)]),(0,o._)("div",za,[Ga,(0,o._)("div",null,[La,(0,o.Wm)(u,{id:"refPoint0Input","with-height":!1,value:s.mutableValue.refPoint0Coords,onValueChange:t[8]||(t[8]=e=>s.mutableValue.refPoint0Coords=e)},null,8,["value"])]),(0,o._)("div",null,[Aa,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.mutableValue.refPoint0Identifier=e),class:"form-control",ref:"refPoint0Identifier",required:""},null,512),[[i.nr,s.mutableValue.refPoint0Identifier]])])]),(0,o._)("div",Za,[Na,(0,o._)("div",null,[Oa,(0,o.Wm)(u,{id:"refPoint1Input","with-height":!1,value:s.mutableValue.refPoint1Coords,onValueChange:t[10]||(t[10]=e=>s.mutableValue.refPoint1Coords=e)},null,8,["value"])]),(0,o._)("div",null,[Ua,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>s.mutableValue.refPoint1Identifier=e),class:"form-control",ref:"refPoint1Identifier",required:""},null,512),[[i.nr,s.mutableValue.refPoint1Identifier]])])]),(0,o._)("div",Wa,[Ra,(0,o._)("div",Ba,[Fa,(0,o._)("span",qa,(0,l.zw)(r.checkValues.rowTitles),1)]),(0,o._)("div",$a,[ja,(0,o._)("span",Ya,(0,l.zw)(r.checkValues.columnTitles),1)]),(0,o._)("div",Ha,[Ka,(0,o._)("span",Qa,(0,l.zw)(r.checkValues.cellSize)+" m",1)])])],512)}const Ja={class:"input-group"},el=["value"],tl=(0,o._)("span",{class:"input-group-text"},"/",-1),nl=["value"],il={key:0,class:"input-group-text"},ol=["value"];function al(e,t,n,i,a,l){const s=(0,o.up)("font-awesome-icon"),r=(0,o.Q2)("mask");return(0,o.wg)(),(0,o.iD)("div",Ja,[(0,o.wy)((0,o._)("input",{class:"form-control",placeholder:"X",value:a.mutableValue.x,onInput:t[0]||(t[0]=(...e)=>l.inputX&&l.inputX(...e)),ref:"inputX"},null,40,el),[[r,"### ###"]]),tl,(0,o.wy)((0,o._)("input",{class:"form-control",placeholder:"Y",value:a.mutableValue.y,onInput:t[1]||(t[1]=(...e)=>l.inputY&&l.inputY(...e)),ref:"inputY"},null,40,nl),[[r,"### ###"]]),n.withHeight?((0,o.wg)(),(0,o.iD)("span",il,"/")):(0,o.kq)("",!0),n.withHeight?(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{key:1,class:"form-control",placeholder:"H",value:a.mutableValue.z,onInput:t[2]||(t[2]=(...e)=>l.inputZ&&l.inputZ(...e)),ref:"inputZ"},null,40,ol)),[[r,"####"]]):(0,o.kq)("",!0),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[3]||(t[3]=(...e)=>l.openList&&l.openList(...e))},[(0,o.Wm)(s,{icon:"fa-solid fa-list"})]),(0,o._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[4]||(t[4]=(...e)=>l.paste&&l.paste(...e))},[(0,o.Wm)(s,{icon:"fa-solid fa-paste"})])])}var ll={name:"PointInput",directives:{mask:ke.mask},props:{withHeight:{type:Boolean,default:!1},value:{type:Object}},emits:["value-change"],data(){const e=this.value?ye(this.value):{x:0,y:0,z:0};return{mutableValue:(0,Ce.qj)(e)}},mounted(){this.updateValidation()},methods:{inputX(e){this.mutableValue.x=parseInt(e.target.value.replaceAll(" ",""))},inputY(e){this.mutableValue.y=parseInt(e.target.value.replaceAll(" ",""))},inputZ(e){this.mutableValue.z=parseInt(e.target.value)},openList(){},paste(){navigator.clipboard.readText().then(fe).then((e=>this.mutableValue=e))},validateRange(e,t,n,i){i&&(e<t?i.setCustomValidity("zu klein"):e>n?i.setCustomValidity("zu gross"):i.setCustomValidity(""))},updateValidation(){this.validateRange(this.mutableValue.x,te,ne,this.$refs.inputX),this.validateRange(this.mutableValue.y,ie,oe,this.$refs.inputY),this.validateRange(this.mutableValue.z,0,9999,this.$refs.inputZ)}},watch:{mutableValue:{handler(){this.updateValidation(),this.$emit("value-change",ye(this.mutableValue))},deep:!0}}};const sl=(0,w.Z)(ll,[["render",al]]);var rl=sl,ul={components:{PointInput:rl},props:{value:{type:Object,required:!0}},emits:["value-change"],data(){const e=(0,Ce.qj)(new po(this.value));return{mutableValue:e,hasQuadrantLetters:null!=this.value.cellQuadrantLetters,NumberingScheme:uo}},watch:{mutableValue:{handler(){this.validateIdentifierValue(this.$refs.refPoint0Identifier,this.mutableValue.refPoint0Identifier),this.validateIdentifierValue(this.$refs.refPoint1Identifier,this.mutableValue.refPoint1Identifier),this.$refs.form.checkValidity(),this.$emit("value-change",this.mutableValue)},deep:!0},hasQuadrantLetters(){this.mutableValue.cellQuadrantLetters=this.$refs.inpQuadrantLettersActive.value?["A","B","C","D"]:null}},methods:{arrayElementsEllipsis(e){return e.length<=10?e.join(", "):[...e.slice(0,5),"...",...e.slice(e.length-5)].join(", ")},validateIdentifierValue(e,t){e.setCustomValidity("");try{this.mutableValue.splitIdentifier(t)}catch(ho){e.setCustomValidity("Ungültig")}}},computed:{checkValues(){const e={columnTitles:"",rowTitles:"",cellSize:""};try{e.columnTitles=this.arrayElementsEllipsis(this.mutableValue.xAxis.getTitles()),e.rowTitles=this.arrayElementsEllipsis(this.mutableValue.yAxis.getTitles())}catch(ho){}try{const t=this.mutableValue.getCellSize();e.cellSize=null!=t?Math.round(t).toString():""}catch(ho){}return e}}};const dl=(0,w.Z)(ul,[["render",Xa]]);var cl=dl,pl={name:"UserGrid",components:{UserGridForm:cl},mounted(){this.modal=new S.u_(this.$refs.divModal)},methods:{deleteUserGridDefinition:ko,saveChangesFromModal(){_o(this.currentlyEditingGrid)},closeModal(){this.modal.hide()},newGrid(){this.currentlyEditingGrid=new po,this.modal.show()},startEditGrid(e){this.currentlyEditingGrid=new po(yo(e)),this.modal.show()},editingGridChanged(e){this.currentlyEditingGrid=e}},data(){return{allUserGrids:go,currentlyEditingGrid:null,modal:null}},computed:{}};const ml=(0,w.Z)(pl,[["render",ta]]);var hl=ml;I.vI.add(V.IwR,V.Vui,V.r8p,V.Yif,V.TqS,V.O4,V.DaQ,V.Krp,V.xiG,V.g82,V.EdJ,V.Wq6,V.q9v,V.u6k,V.f1U,V._jT,V.Zrf);const fl=[{path:"/pointList",component:Me,name:"Punkteliste"},{path:"/coordinateCalculations",component:vi,name:"Koordinatenberechnungen"},{path:"/mapView",component:Oo,name:"Karte"},{path:"/userGrid",component:hl,name:"Führungsraster"},{path:"/ballisticsCalculator",component:Dn,name:"Ballistik"}];const bl=(0,x.p7)({history:(0,x.r5)(),routes:[{path:"/",redirect:"/pointList"},...fl],linkExactActiveClass:"active"});(0,i.ri)(C).component("font-awesome-icon",P.GN).use(bl).mount("#app"),document.body.setAttribute("data-bs-theme","dark")},5042:function(){}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,function(){n.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){n.amdO={}}(),function(){var e=[];n.O=function(t,i,o,a){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],a=e[d][2];for(var s=!0,r=0;r<i.length;r++)(!1&a||l>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[r])}))?i.splice(r--,1):(s=!1,a<l&&(l=a));if(s){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,a,l=i[0],s=i[1],r=i[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(r)var d=r(n)}for(t&&t(i);u<l.length;u++)a=l[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},i=self["webpackChunksph_tool"]=self["webpackChunksph_tool"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(9106)}));i=n.O(i)})();
//# sourceMappingURL=app.6d248c0d.js.map